# 🧪 浏览器测试指南 - Global Templates Library

**快速测试步骤** | **预计时间**: 5 分钟

---

## 🚀 开始测试

### 1. 打开应用

1. 确保开发服务器正在运行（应该已经在运行）
2. 打开浏览器，访问: **http://localhost:3000**
3. 打开开发者工具 (按 **F12** 键)

---

### 2. 打开 Global Templates Library

1. 在主页上找到 **"Global Templates Library"** 按钮（紫色图标）
2. 点击按钮
3. **✅ 预期结果**: 模态框打开，显示 6 个精选模板

---

### 3. 测试下载功能

#### 测试 1: 下载第一个模板

1. 找到 **"510(k) Premarket Notification"** 模板
2. 点击 **"Download Template"** 按钮
3. **✅ 预期结果**:
   - 按钮文本变为 "Downloading..."
   - 浏览器开始下载文件
   - 文件名: `510(k) Premarket Notification.pdf`
   - 文件大小: 约 2 MB
   - 下载完成后按钮恢复正常

#### 测试 2: 验证下载的文件

1. 打开刚下载的 PDF 文件
2. **✅ 预期结果**:
   - 文件可以正常打开
   - 显示 "510(k) Premarket Notification" 文本

#### 测试 3: 下载其他模板

1. 依次测试其他 5 个模板:
   - IND Application Template
   - EU MDR Technical Documentation Template
   - PMA Application Template
   - BLA Application Template
   - NDA Application Template

2. **✅ 预期结果**: 所有模板都可以正常下载

---

### 4. 检查控制台

1. 在开发者工具的 **Console** 标签页中
2. **✅ 预期结果**:
   - 没有红色错误信息
   - 可能看到一些蓝色的日志信息（正常）

---

### 5. 检查网络请求

1. 在开发者工具的 **Network** 标签页中
2. 点击下载按钮
3. **✅ 预期结果**:
   - 看到对 Supabase Storage 的请求
   - 状态码: **200 OK**
   - 响应类型: **application/pdf**

---

## 📊 测试检查清单

请在测试时勾选以下项目：

- [ ] 模态框可以正常打开和关闭
- [ ] 显示 6 个精选模板
- [ ] 所有模板信息完整显示（标题、描述、日期等）
- [ ] 点击下载按钮时显示 "Downloading..." 状态
- [ ] 文件可以成功下载
- [ ] 下载的文件名正确
- [ ] 下载的文件可以正常打开
- [ ] 控制台没有错误信息
- [ ] 网络请求返回 200 状态码

---

## ❌ 如果遇到问题

### 问题 1: 下载失败，显示错误

**可能原因**: Storage bucket 配置问题

**解决方案**:
1. 运行测试脚本验证配置:
   ```bash
   node scripts/test-download.js
   ```
2. 如果测试脚本通过，刷新浏览器页面重试

---

### 问题 2: 文件下载但无法打开

**可能原因**: 测试 PDF 文件格式问题

**解决方案**:
- 这是正常的，因为我们使用的是简单的测试 PDF 文件
- 生产环境中会替换为真实的模板文件

---

### 问题 3: 下载次数没有更新

**检查方法**:
1. 打开 Supabase Dashboard
2. 进入 `global_templates` 表
3. 查看 `download_count` 字段

**可能原因**: 数据库更新逻辑问题

**解决方案**:
- 检查控制台是否有错误信息
- 确认用户有权限更新数据库

---

## 🎯 测试完成后

### 如果所有测试都通过 ✅

**恭喜！Global Templates Library 功能已完全实现并正常工作！**

请告诉我测试结果，我们可以：
1. 进入第三阶段（优化和增强功能）
2. 或者开始实现其他功能模块

---

### 如果有测试失败 ❌

请提供以下信息：
1. 哪个测试失败了？
2. 浏览器控制台的错误信息（截图）
3. 网络请求的详细信息（截图）

我会立即帮您诊断和修复问题。

---

## 📸 测试截图建议

建议截图以下内容（用于记录）：

1. **模态框打开状态** - 显示 6 个模板
2. **下载按钮点击** - 显示 "Downloading..." 状态
3. **浏览器下载** - 显示下载进度
4. **控制台日志** - 显示没有错误
5. **网络请求** - 显示 200 状态码

---

## ⏱️ 预计测试时间

- **快速测试** (测试 1 个模板): 2 分钟
- **完整测试** (测试所有 6 个模板): 5 分钟
- **详细验证** (包括检查下载次数): 10 分钟

---

**准备好了吗？开始测试吧！** 🚀

访问: **http://localhost:3000**

